# ðŸš€ Admin AI Chatbox - Quick Start Guide

## âš¡ 5 PhÃºt Setup

### Step 1: Database Migration (1 phÃºt)

Cháº¡y SQL script:
```sql
-- File: SportifyBackend/Database/admin_ai_chat_history.sql

CREATE TABLE admin_ai_chat_history (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    admin_id VARCHAR(100) NOT NULL,
    message LONGTEXT,
    response LONGTEXT,
    role VARCHAR(20),
    message_data LONGTEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_admin_id (admin_id),
    INDEX idx_created_at (created_at)
);
```

**Hoáº·c cháº¡y trong MySQL:**
```bash
cd SportifyBackend
mysql -u root -p sportify_db < Database/admin_ai_chat_history.sql
```

### Step 2: Backend Build (2 phÃºt)

```bash
cd SportifyBackend
mvn clean install -DskipTests
# Hoáº·c: mvn spring-boot:run
```

### Step 3: Frontend Build (1 phÃºt)

```bash
cd SportifyFrontend
npm run build
```

### Step 4: Restart Services (1 phÃºt)

```bash
# Backend sáº½ auto-reload náº¿u Ä‘ang cháº¡y
# Frontend auto-reload khi lÆ°u file
```

---

## âœ… Kiá»ƒm Tra Hoáº¡t Äá»™ng

1. **Má»Ÿ Browser**: `http://localhost:5173/admin/dashboard`
2. **Login**: DÃ¹ng tÃ i khoáº£n Admin
3. **NhÃ¬n gÃ³c pháº£i**: Sáº½ tháº¥y nÃºt ðŸ¤–
4. **Click nÃºt ðŸ¤–**: Má»Ÿ chatbox
5. **GÃµ tin nháº¯n**: VÃ­ dá»¥ "Danh sÃ¡ch sáº£n pháº©m"
6. **Tháº¥y response**: AI sáº½ tráº£ lá»i

---

## ðŸ§ª Test Cases

### Test 1: Basic Chat
```
Nháº­p: "Cho tÃ´i xem danh sÃ¡ch sáº£n pháº©m"
Ká»³ vá»ng: Danh sÃ¡ch sáº£n pháº©m HTML
```

### Test 2: Statistics
```
Nháº­p: "Thá»‘ng kÃª doanh thu"
Ká»³ vá»ng: ThÃ´ng tin doanh thu
```

### Test 3: User Management
```
Nháº­p: "CÃ³ bao nhiÃªu ngÆ°á»i dÃ¹ng?"
Ká»³ vá»ng: Sá»‘ lÆ°á»£ng ngÆ°á»i dÃ¹ng
```

### Test 4: File Upload
```
Nháº­p: Gá»­i file + "PhÃ¢n tÃ­ch file nÃ y"
Ká»³ vá»ng: AI xá»­ lÃ½ file
```

### Test 5: History
```
Nháº­p: VÃ i tin nháº¯n
ÄÃ³ng chatbox rá»“i má»Ÿ láº¡i
Ká»³ vá»ng: Lá»‹ch sá»­ Ä‘Æ°á»£c restore
```

---

## ðŸŽ¯ Quick Replies (cÃ³ sáºµn)

- ðŸ“Š Thá»‘ng kÃª doanh thu
- ðŸ›ï¸ Quáº£n lÃ½ sáº£n pháº©m
- âš½ Quáº£n lÃ½ sÃ¢n thá»ƒ thao
- ðŸ‘¥ Quáº£n lÃ½ tÃ i khoáº£n
- ðŸ“… Quáº£n lÃ½ sá»± kiá»‡n
- ðŸ“‹ Xem danh sÃ¡ch Ä‘áº·t

---

## ðŸ› Troubleshooting

| Váº¥n Ä‘á» | Giáº£i PhÃ¡p |
|--------|----------|
| NÃºt ðŸ¤– khÃ´ng hiá»‡n | Kiá»ƒm tra AdminAIChatbox import trong LayoutAdmin.tsx |
| API error | Kiá»ƒm tra backend running: `http://localhost:8081` |
| Chat khÃ´ng lÆ°u | Kiá»ƒm tra database + localStorage |
| Response cháº­m | Retry logic sáº½ tá»± xá»­ lÃ½ (3 láº§n) |
| Styling láº¡ | XÃ³a cache: Ctrl+Shift+Del |

---

## ðŸ“‚ File Quan Trá»ng

```
âœ… Frontend:
   src/components/admin/AdminAIChatbox.tsx

âœ… Backend:
   rest/controller/AdminAIChatController.java
   service/impl/AdminGeminiServiceImpl.java
   rest/controller/AdminAIChatHistoryController.java

âœ… Database:
   Database/admin_ai_chat_history.sql

âœ… Config:
   resources/prompts/AI_admin_prompt.txt
   utils/AI/AIServiceFactory.java (updated)
```

---

## ðŸ”‘ Key Differences vs Customer Chatbox

| Feature | Customer | Admin |
|---------|----------|-------|
| API | `/ai/product-chat` | `/ai/admin-chat` |
| Icon | ðŸ’¬ | ðŸ¤– |
| Storage | `aichatbox_` | `adminaichatbox_` |
| DB Table | `ai_chat_history` | `admin_ai_chat_history` |
| Service | GeminiServiceImpl | AdminGeminiServiceImpl |
| Quick Replies | Shopping focus | Management focus |
| Context Data | Products, Fields, Events | + Users, Categories, Shifts |

---

## ðŸ“ž API Endpoints

### Main Chat Endpoint
```
POST /sportify/rest/ai/admin-chat
Content-Type: application/json
Body: {"message": "CÃ¢u há»i..."}
```

### History Endpoints
```
POST /sportify/rest/ai/admin/history/save
GET  /sportify/rest/ai/admin/history/get-history?adminId=...
GET  /sportify/rest/ai/admin/history/all
DELETE /sportify/rest/ai/admin/history/clear/{adminId}
```

---

## ðŸ’¡ Pro Tips

1. **Äáº·t tÃªn cá»¥ thá»ƒ**: Thay vÃ¬ "Hiá»‡n Ä‘Æ¡n Ä‘áº·t", hÃ£y "Liá»‡t kÃª 10 Ä‘Æ¡n Ä‘áº·t má»›i nháº¥t"
2. **Sá»­ dá»¥ng Quick Replies**: Nhanh hÆ¡n gÃµ
3. **XÃ³a History Ä‘á»‹nh ká»³**: Click ðŸ—‘ï¸ Ä‘á»ƒ dá»n dáº¹p
4. **File Upload**: Gá»­i bÃ¡o cÃ¡o PDF Ä‘á»ƒ AI phÃ¢n tÃ­ch
5. **TÃ¬m kiáº¿m**: Ctrl+F trong chat Ä‘á»ƒ tÃ¬m tin nháº¯n cÅ©

---

## âœ¨ TÃ­nh NÄƒng Premium (Sáº¯p tá»›i)

- [ ] Export PDF/Excel
- [ ] Real-time dashboards
- [ ] Voice commands
- [ ] Multi-language
- [ ] Scheduled reports
- [ ] Webhook integration

---

**ðŸŽ‰ Setup xong! Enjoy Admin AI Chatbox!**

Há»i gÃ¬ cÅ©ng Ä‘Æ°á»£c, AI sáº½ giÃºp! ðŸ¤–
